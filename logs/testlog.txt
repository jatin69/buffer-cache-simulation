./test.sh
[3J[H[2J
********** Scenario ï¼‘ **********

Initializing ...
Creating Hash Queues ... Done
Creating Free List ... Done
Creating Wait Queue ... Done
Setting up Buffer Cache as per figure 3.2 of Maurice J Bach
Setting up Hash Queues ... Done
Setting up Free List ... Done
Ready to go.
âžœ hash
0  :[  0 : D 28 ----V-][  1 : D  4 ----V-][  2 : D 64 ----VB]
1  :[  3 : D 17 ----VB][  4 : D  5 ----V-][  5 : D 97 ----V-]
2  :[  6 : D 98 ----VB][  7 : D 50 ----VB][  8 : D 10 ----V-]
3  :[  9 : D  3 ----V-][ 10 : D 35 ----VB][ 11 : D 99 ----VB]
âžœ free
[  3 : D  3 ----V-][  3 : D  5 ----V-][  1 : D  4 ----V-][  0 : D 28 ----V-][  3 : D 97 ----V-][  3 : D 10 ----V-]
âžœ getblk
4
********* Scenario 1 *********
The kernel finds the block on its hash queue, and its buffer is free.
Buffer Marked Busy.
Removed Buffer from Free List. 
Buffer Allocated Successfully.
âžœ hash
0  :[  0 : D 28 ----V-][  1 : D  4 ----VB][  2 : D 64 ----VB]
1  :[  3 : D 17 ----VB][  4 : D  5 ----V-][  5 : D 97 ----V-]
2  :[  6 : D 98 ----VB][  7 : D 50 ----VB][  8 : D 10 ----V-]
3  :[  9 : D  3 ----V-][ 10 : D 35 ----VB][ 11 : D 99 ----VB]
âžœ free
[  3 : D  3 ----V-][  3 : D  5 ----V-][  0 : D 28 ----V-][  3 : D 97 ----V-][  3 : D 10 ----V-]
âžœ 











[3J[H[2J
 ********** Scenario 2 **********

Initializing ...
Creating Hash Queues ... Done
Creating Free List ... Done
Creating Wait Queue ... Done
Setting up Buffer Cache as per figure 3.2 of Maurice J Bach
Setting up Hash Queues ... Done
Setting up Free List ... Done
Ready to go.
âžœ hash
0  :[  0 : D 28 ----V-][  1 : D  4 ----V-][  2 : D 64 ----VB]
1  :[  3 : D 17 ----VB][  4 : D  5 ----V-][  5 : D 97 ----V-]
2  :[  6 : D 98 ----VB][  7 : D 50 ----VB][  8 : D 10 ----V-]
3  :[  9 : D  3 ----V-][ 10 : D 35 ----VB][ 11 : D 99 ----VB]
âžœ free
[  3 : D  3 ----V-][  3 : D  5 ----V-][  1 : D  4 ----V-][  0 : D 28 ----V-][  3 : D 97 ----V-][  3 : D 10 ----V-]
âžœ getblk
18
********* Scenario 2 *********
The kernel cannot find the block on the hash queue, so it allocates a buffer from the free list.
REMOVING FROM OLD HASH QUEUE.
PUTTING IN NEW HASH QUEUE
Kernel DISK access occuring. Status of Block Updated.
Kernel DISK access finished. Status of Block Updated.
BUFFER now contains new and Valid Data. Updating status.
Buffer Allocated Successfully.
âžœ hash
0  :[  0 : D 28 ----V-][  1 : D  4 ----V-][  2 : D 64 ----VB]
1  :[  3 : D 17 ----VB][  4 : D  5 ----V-][  5 : D 97 ----V-]
2  :[  6 : D 98 ----VB][  7 : D 50 ----VB][  8 : D 10 ----V-][  9 : D 18 ----VB]
3  :[ 10 : D 35 ----VB][ 11 : D 99 ----VB]
âžœ free
[  3 : D  5 ----V-][  1 : D  4 ----V-][  0 : D 28 ----V-][  3 : D 97 ----V-][  3 : D 10 ----V-]
âžœ 











[3J[H[2J
 ********** Scenario 3 **********

Initializing ...
Creating Hash Queues ... Done
Creating Free List ... Done
Creating Wait Queue ... Done
Setting up Buffer Cache as per figure 3.2 of Maurice J Bach
Setting up Hash Queues ... Done
Setting up Free List ... Done
Ready to go.
âžœ hash
0  :[  0 : D 28 ----V-][  1 : D  4 ----V-][  2 : D 64 ----VB]
1  :[  3 : D 17 ----VB][  4 : D  5 ----V-][  5 : D 97 ----V-]
2  :[  6 : D 98 ----VB][  7 : D 50 ----VB][  8 : D 10 ----V-]
3  :[  9 : D  3 ----V-][ 10 : D 35 ----VB][ 11 : D 99 ----VB]
âžœ free
[  3 : D  3 ----V-][  3 : D  5 ----V-][  1 : D  4 ----V-][  0 : D 28 ----V-][  3 : D 97 ----V-][  3 : D 10 ----V-]
âžœ set
3
stat
D
âžœ set
5
stat
D
âžœ hash
0  :[  0 : D 28 ----V-][  1 : D  4 ----V-][  2 : D 64 ----VB]
1  :[  3 : D 17 ----VB][  4 : D  5 ---DV-][  5 : D 97 ----V-]
2  :[  6 : D 98 ----VB][  7 : D 50 ----VB][  8 : D 10 ----V-]
3  :[  9 : D  3 ---DV-][ 10 : D 35 ----VB][ 11 : D 99 ----VB]
âžœ free
[  3 : D  3 ---DV-][  3 : D  5 ---DV-][  1 : D  4 ----V-][  0 : D 28 ----V-][  3 : D 97 ----V-][  3 : D 10 ----V-]
âžœ getblk
18
********* Scenario 3 *********
The kernel cannot find the block on the hash queue. Found free block is marked delayed write.
Marking Buffer OLD. Starting Asynchronous write to disk.
********* Scenario 3 *********
The kernel cannot find the block on the hash queue. Found free block is marked delayed write.
Marking Buffer OLD. Starting Asynchronous write to disk.
********* Scenario 2 *********
The kernel cannot find the block on the hash queue, so it allocates a buffer from the free list.
REMOVING FROM OLD HASH QUEUE.
PUTTING IN NEW HASH QUEUE
Kernel DISK access occuring. Status of Block Updated.
Kernel DISK access finished. Status of Block Updated.
BUFFER now contains new and Valid Data. Updating status.
Buffer Allocated Successfully.
âžœ hash
0  :[  0 : D 28 ----V-][  1 : D 64 ----VB]
1  :[  2 : D 17 ----VB][  3 : D  5 O--DVB][  4 : D 97 ----V-]
2  :[  5 : D 98 ----VB][  6 : D 50 ----VB][  7 : D 10 ----V-][  8 : D 18 ----VB]
3  :[  9 : D  3 O--DVB][ 10 : D 35 ----VB][ 11 : D 99 ----VB]
âžœ free
[  0 : D 28 ----V-][  2 : D 97 ----V-][  2 : D 10 ----V-]
âžœ 











[3J[H[2J
 ********** Scenario 4 **********

Initializing ...
Creating Hash Queues ... Done
Creating Free List ... Done
Creating Wait Queue ... Done
Setting up Buffer Cache as per figure 3.2 of Maurice J Bach
Setting up Hash Queues ... Done
Setting up Free List ... Done
Ready to go.
âžœ hash
0  :[  0 : D 28 ----V-][  1 : D  4 ----V-][  2 : D 64 ----VB]
1  :[  3 : D 17 ----VB][  4 : D  5 ----V-][  5 : D 97 ----V-]
2  :[  6 : D 98 ----VB][  7 : D 50 ----VB][  8 : D 10 ----V-]
3  :[  9 : D  3 ----V-][ 10 : D 35 ----VB][ 11 : D 99 ----VB]
âžœ free
[  3 : D  3 ----V-][  3 : D  5 ----V-][  1 : D  4 ----V-][  0 : D 28 ----V-][  3 : D 97 ----V-][  3 : D 10 ----V-]
âžœ getblk
3
********* Scenario 1 *********
The kernel finds the block on its hash queue, and its buffer is free.
Buffer Marked Busy.
Removed Buffer from Free List. 
Buffer Allocated Successfully.
âžœ getblk
5
********* Scenario 1 *********
The kernel finds the block on its hash queue, and its buffer is free.
Buffer Marked Busy.
Removed Buffer from Free List. 
Buffer Allocated Successfully.
âžœ getblk
4
********* Scenario 1 *********
The kernel finds the block on its hash queue, and its buffer is free.
Buffer Marked Busy.
Removed Buffer from Free List. 
Buffer Allocated Successfully.
âžœ getblk
28
********* Scenario 1 *********
The kernel finds the block on its hash queue, and its buffer is free.
Buffer Marked Busy.
Removed Buffer from Free List. 
Buffer Allocated Successfully.
âžœ getblk
97
********* Scenario 1 *********
The kernel finds the block on its hash queue, and its buffer is free.
Buffer Marked Busy.
Removed Buffer from Free List. 
Buffer Allocated Successfully.
âžœ getblk
10
********* Scenario 1 *********
The kernel finds the block on its hash queue, and its buffer is free.
Buffer Marked Busy.
Removed Buffer from Free List. 
Buffer Allocated Successfully.
âžœ free

âžœ getblk
18
********* Scenario 4 *********
The kernel cannot find the block on the hash queue, and the free list of buffers is empty.
Process goes to sleep.
Process will wake up when any buffer becomes free.
âžœ hash
0  :[  0 : D 28 ----VB][  1 : D  4 ----VB][  2 : D 64 ----VB]
1  :[  3 : D 17 ----VB][  4 : D  5 ----VB][  5 : D 97 ----VB]
2  :[  6 : D 98 ----VB][  7 : D 50 ----VB][  8 : D 10 ----VB]
3  :[  9 : D  3 ----VB][ 10 : D 35 ----VB][ 11 : D 99 ----VB]
âžœ free

âžœ wait
[ getblk 18 : WAITING FOR ANY BUFFER] 
âžœ 











[3J[H[2J
 ********** Scenario 5 **********

Initializing ...
Creating Hash Queues ... Done
Creating Free List ... Done
Creating Wait Queue ... Done
Setting up Buffer Cache as per figure 3.2 of Maurice J Bach
Setting up Hash Queues ... Done
Setting up Free List ... Done
Ready to go.
âžœ hash
0  :[  0 : D 28 ----V-][  1 : D  4 ----V-][  2 : D 64 ----VB]
1  :[  3 : D 17 ----VB][  4 : D  5 ----V-][  5 : D 97 ----V-]
2  :[  6 : D 98 ----VB][  7 : D 50 ----VB][  8 : D 10 ----V-]
3  :[  9 : D  3 ----V-][ 10 : D 35 ----VB][ 11 : D 99 ----VB]
âžœ free
[  3 : D  3 ----V-][  3 : D  5 ----V-][  1 : D  4 ----V-][  0 : D 28 ----V-][  3 : D 97 ----V-][  3 : D 10 ----V-]
âžœ getblk
64
 ********* Scenario 5 *********
The kernel finds the block on the hash queue, but its buffer is currently busy.
Process goes to sleep.
Process will wake up when this buffer becomes free
âžœ hash
0  :[  0 : D 28 ----V-][  1 : D  4 ----V-][  2 : D 64 -W--VB]
1  :[  3 : D 17 ----VB][  4 : D  5 ----V-][  5 : D 97 ----V-]
2  :[  6 : D 98 ----VB][  7 : D 50 ----VB][  8 : D 10 ----V-]
3  :[  9 : D  3 ----V-][ 10 : D 35 ----VB][ 11 : D 99 ----VB]
âžœ free
[  3 : D  3 ----V-][  3 : D  5 ----V-][  1 : D  4 ----V-][  0 : D 28 ----V-][  3 : D 97 ----V-][  3 : D 10 ----V-]
âžœ wait
[ getblk 64 : WAITING FOR THIS BUFFER] 
âžœ 





